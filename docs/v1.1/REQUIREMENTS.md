# 需求规格说明书 - v1.1

## 1. 项目概述

### 1.1 版本背景
v1.1 版本在 v1.0 基础功能之上，重点增强对 iOS 平台的支持，完善移动端特别是苹果设备的使用体验。

### 1.2 版本目标
- 提供完整的 iOS 平台使用方案和文档
- 增强 Pythonista 集成支持
- 提供 iOS 快捷指令集成方案
- 完善移动端文档和示例代码
- 保持与 v1.0 的完全向后兼容

## 2. 功能需求

### 2.1 Pythonista 集成支持 (FR-101)
**优先级**: P0

**描述**: 
提供完整的 Pythonista (iOS Python 环境) 集成方案和文档。

**详细需求**:
- 提供 Pythonista 安装和配置指南
- 创建快速笔记脚本模板
- 说明依赖库安装方法
- 提供 photos 模块集成示例

**输入**:
- 在 Pythonista 环境中运行的脚本
- 笔记标题和内容（通过参数或文件）

**输出**:
- 成功创建的笔记链接
- 清晰的错误提示

---

### 2.2 iOS 快捷指令集成 (FR-102)
**优先级**: P0

**描述**: 
支持通过 iOS 快捷指令调用 Life Log 功能，实现语音创建笔记等场景。

**详细需求**:
- 提供 Flask API 封装示例
- 详细的快捷指令配置步骤
- API 安全认证方案
- 错误处理和用户反馈

**输入**:
- 通过 HTTP API 接收的笔记内容
- 认证凭据

**输出**:
- JSON 格式的响应
- 成功状态和笔记链接

---

### 2.3 iOS 照片上传支持 (FR-103)
**优先级**: P1

**描述**: 
在 Pythonista 中支持从 iOS 照片库选择和上传照片到 OneDrive。

**详细需求**:
- 使用 Pythonista photos 模块选择照片
- 支持单张和批量选择
- 显示上传进度
- 可指定目标文件夹

**输入**:
- 从 photos 模块获取的照片数据
- 目标文件夹路径（可选）

**输出**:
- 上传成功的文件 URL
- 失败时的错误信息

---

### 2.4 远程服务器使用方案 (FR-104)
**优先级**: P1

**描述**: 
提供在服务器上部署并通过 iOS SSH 客户端访问的完整方案。

**详细需求**:
- 推荐的 iOS SSH 客户端列表
- 服务器部署指南
- SSH 连接配置步骤
- 命令行使用最佳实践

**输入**:
- SSH 连接信息
- 命令行参数

**输出**:
- 与桌面端相同的功能和输出

---

### 2.5 iOS 平台文档增强 (FR-105)
**优先级**: P0

**描述**: 
完善 iOS 平台的使用文档，包括常见问题、最佳实践和故障排除。

**详细需求**:
- 更新 MOBILE_GUIDE.md，增加 iOS 详细说明
- 提供多个实用示例和脚本模板
- 常见问题解答
- 平台特定的限制和注意事项
- 自动化和效率提升技巧

---

### 2.6 向后兼容性保证 (FR-106)
**优先级**: P0

**描述**: 
确保 v1.1 完全兼容 v1.0 的所有功能和 API。

**详细需求**:
- 所有 v1.0 API 保持不变
- 配置文件格式兼容
- 认证机制不变
- 无破坏性变更

## 3. 非功能需求

### 3.1 性能需求
- 与 v1.0 保持相同的性能标准
- Pythonista 脚本启动时间 < 3 秒
- API 响应时间 < 2 秒（不含网络延迟）

### 3.2 安全需求
- API 必须支持身份验证
- 建议使用 API 密钥或 token 认证
- HTTPS 加密传输
- 安全配置文件存储建议

### 3.3 可用性需求
- iOS 特定文档清晰易懂
- 代码示例可直接运行
- 错误消息友好且具体
- 提供完整的故障排除指南

### 3.4 兼容性需求
- 支持 Pythonista 3
- 支持 iOS 13+
- 兼容主流 iOS SSH 客户端
- 支持 iOS 快捷指令 app

## 4. 约束条件

### 4.1 技术约束
- Pythonista 环境中某些 Python 包可能不可用
- iOS 快捷指令需要外部服务器支持
- 受 iOS 沙盒限制

### 4.2 业务约束
- v1.1 版本不实现原生 iOS app
- 仍不支持自定义分类和目录配置
- 专注于现有功能的 iOS 平台优化

## 5. 文档要求

### 5.1 必需文档
- [x] CHANGELOG.md - 变更日志
- [x] USER_STORIES.md - 用户故事
- [x] REQUIREMENTS.md - 本文档
- [ ] DESIGN.md - iOS 集成设计文档

### 5.2 更新文档
- [ ] 更新 MOBILE_GUIDE.md
- [ ] 更新 README.md 引用 v1.1
- [ ] 更新 DEVELOPMENT.md（如需）

## 6. 验收标准

### 6.1 功能验收
- [ ] Pythonista 示例脚本可正常运行
- [ ] Flask API 示例可部署并工作
- [ ] 快捷指令配置文档完整准确
- [ ] 所有文档示例经过测试

### 6.2 文档验收
- [ ] 所有 v1.1 文档完整
- [ ] 代码示例语法正确
- [ ] 链接和引用有效
- [ ] 排版格式统一

### 6.3 兼容性验收
- [ ] 所有 v1.0 测试通过
- [ ] 现有配置文件可直接使用
- [ ] API 接口保持稳定

## 7. 未来扩展

### 7.1 v1.2 计划
- 考虑添加更多自动化示例
- 优化移动端性能
- 增加更多平台支持（如安卓）

### 7.2 v2.0 计划
- 自定义分类和标签系统
- 目录自动映射
- 原生移动应用（iOS/Android）
- 图形用户界面
