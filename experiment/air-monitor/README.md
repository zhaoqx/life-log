# 厨房空气质量监测与异常告警实验

## 项目概述

本项目是一个创意实验，旨在开发一套完整的厨房空气质量监测与异常告警系统。通过集成多种传感器，实时监测厨房环境中的PM2.5、一氧化碳、二氧化碳、温度和湿度等指标，并在检测到异常情况时及时发出告警，保障家庭健康安全。

## 项目目标

1. **实时监测**：连续监测厨房空气质量各项指标
2. **智能告警**：基于多指标综合判断，准确识别异常情况
3. **数据分析**：长期记录和分析数据，发现空气质量变化规律
4. **可视化展示**：通过Web界面直观展示监测结果和历史趋势

## 项目结构

```
experiment/air-monitor/
├── docs/                                          # 文档目录
│   ├── research-厨房空气质量监测与异常告警创意实验方案.md  # 实验方案
│   ├── project-plan-厨房空气监测实验计划.csv           # 项目计划
│   ├── materials-checklist-材料准备清单.md            # 材料清单
│   └── README.md                                  # 本文件
├── src/                                           # 源代码目录
│   ├── arduino/                                   # Arduino代码
│   │   └── air_monitor.ino                       # 传感器数据采集程序
│   ├── raspberry_pi/                              # 树莓派代码
│   │   ├── sensor_reader.py                      # 传感器读取模块
│   │   └── data_collector.py                     # 数据采集主程序
│   ├── backend/                                   # 后端服务
│   │   ├── app.py                                # Flask应用主文件
│   │   ├── models.py                             # 数据模型
│   │   ├── database.py                           # 数据库操作
│   │   ├── alert_system.py                       # 告警系统
│   │   └── api.py                                # API接口
│   ├── frontend/                                  # 前端界面
│   │   ├── index.html                            # 主页面
│   │   ├── css/                                  # 样式文件
│   │   ├── js/                                   # JavaScript文件
│   │   └── assets/                               # 静态资源
│   └── simulator/                                 # 模拟器（用于演示）
│       ├── air_quality_simulator.py              # 空气质量数据模拟器
│       └── sensor_simulator.py                   # 传感器数据模拟器
├── demo/                                          # 演示模块
│   ├── principle-animation/                       # 原理动画
│   │   ├── system_architecture.html              # 系统架构动画
│   │   ├── data_flow.html                        # 数据流程动画
│   │   └── README.md                             # 动画说明
│   └── monitoring-results/                        # 监测结果演示
│       ├── dashboard.html                         # 实时监控面板
│       ├── historical_data.html                   # 历史数据展示
│       └── README.md                              # 演示说明
├── data/                                          # 数据目录
│   ├── sample_data.csv                            # 示例数据
│   └── air_quality.db                             # SQLite数据库（运行时生成）
├── tests/                                         # 测试文件
│   ├── test_sensors.py                            # 传感器测试
│   ├── test_alert.py                              # 告警系统测试
│   └── test_api.py                                # API测试
├── requirements.txt                                # Python依赖
├── config.json                                     # 配置文件
└── README.md                                       # 项目说明（本文件）
```

## 快速开始

### 环境要求

- Python 3.8+
- Arduino IDE 1.8+ 或 Raspberry Pi OS
- 现代浏览器（Chrome、Firefox、Edge等）

### 安装步骤

1. **克隆仓库**
```bash
cd /path/to/life-log/experiment/air-monitor
```

2. **安装Python依赖**
```bash
pip install -r requirements.txt
```

3. **配置系统**
```bash
# 编辑配置文件，设置传感器参数和告警阈值
cp config.example.json config.json
```

4. **初始化数据库**
```bash
python src/backend/database.py init
```

### 运行系统

#### 方式1：使用真实硬件

1. **上传Arduino程序**
```bash
# 使用Arduino IDE打开 src/arduino/air_monitor.ino
# 选择正确的开发板和端口，上传程序
```

2. **启动后端服务**
```bash
cd src/backend
python app.py
```

3. **访问Web界面**
打开浏览器访问：http://localhost:5000

#### 方式2：使用模拟器（演示用）

1. **启动数据模拟器**
```bash
python src/simulator/air_quality_simulator.py
```

2. **启动后端服务**
```bash
cd src/backend
python app.py --simulator
```

3. **访问Web界面**
打开浏览器访问：http://localhost:5000

### 演示模块

#### 原理动画演示
```bash
# 在浏览器中打开
demo/principle-animation/system_architecture.html  # 系统架构动画
demo/principle-animation/data_flow.html            # 数据流程动画
```

#### 监测结果演示
```bash
# 在浏览器中打开
demo/monitoring-results/dashboard.html             # 实时监控面板
demo/monitoring-results/historical_data.html       # 历史数据展示
```

## 系统架构

### 硬件架构
```
┌─────────────────────────────────────────┐
│          传感器层                        │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐   │
│  │PM2.5 │ │ CO   │ │ CO2  │ │温湿度│   │
│  └──┬───┘ └──┬───┘ └──┬───┘ └──┬───┘   │
└─────┼────────┼────────┼────────┼────────┘
      │        │        │        │
      └────────┴────────┴────────┘
                  │
      ┌───────────┴───────────┐
      │   微控制器（Arduino/树莓派）│
      │   - 数据采集            │
      │   - 串口通信            │
      │   - 本地告警            │
      └───────────┬───────────┘
                  │
      ┌───────────┴───────────┐
      │    后端服务（Flask）    │
      │   - 数据存储            │
      │   - 异常检测            │
      │   - 告警触发            │
      │   - API服务             │
      └───────────┬───────────┘
                  │
      ┌───────────┴───────────┐
      │   前端界面（Web）       │
      │   - 实时监控            │
      │   - 历史数据            │
      │   - 告警记录            │
      └───────────────────────┘
```

### 软件架构
```
┌─────────────────────────────────────────┐
│            前端层（Frontend）            │
│  - HTML/CSS/JavaScript                  │
│  - Chart.js（图表）                     │
│  - Socket.IO（实时通信）                 │
└──────────────┬──────────────────────────┘
               │ HTTP/WebSocket
┌──────────────┴──────────────────────────┐
│            API层（Flask）                │
│  - RESTful API                          │
│  - WebSocket推送                         │
│  - 身份认证                              │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│          业务逻辑层（Business）          │
│  - 数据预处理                            │
│  - 异常检测算法                          │
│  - 告警策略引擎                          │
│  - 数据分析                              │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│          数据访问层（Data Access）       │
│  - ORM（SQLAlchemy）                    │
│  - 缓存（可选）                          │
└──────────────┬──────────────────────────┘
               │
┌──────────────┴──────────────────────────┐
│          数据存储层（Storage）           │
│  - SQLite/MySQL                         │
│  - 时序数据存储                          │
└─────────────────────────────────────────┘
```

## 监测指标与告警阈值

| 指标 | 单位 | 正常范围 | 警戒值 | 危险值 |
|------|------|----------|--------|--------|
| PM2.5 | μg/m³ | 0-35 | >75 | >150 |
| PM10 | μg/m³ | 0-50 | >150 | >250 |
| CO | ppm | 0-9 | >35 | >100 |
| CO2 | ppm | 400-1000 | >2000 | >5000 |
| 温度 | ℃ | 15-30 | >35 | >45 |
| 湿度 | % | 40-70 | <30或>80 | <20或>90 |

## 主要功能

### 1. 实时监测
- 每秒采集一次传感器数据
- 实时显示当前空气质量状态
- 使用颜色编码直观展示（绿色正常、黄色警告、红色危险）

### 2. 异常告警
- **本地告警**：蜂鸣器声音 + LED灯闪烁
- **远程告警**：Web推送 + 邮件通知（可选）
- **智能判断**：避免频繁误报

### 3. 数据记录
- 自动记录所有监测数据
- 支持数据导出（CSV格式）
- 长期数据保留（可配置）

### 4. 数据分析
- 日/周/月统计报表
- 峰值时段识别
- 趋势分析和预测

### 5. 可视化展示
- 实时折线图
- 历史数据对比
- 告警记录查询

## 开发进度

### 已完成
- [x] 项目方案设计
- [x] 材料清单准备
- [x] 项目计划制定
- [x] 基础文档编写

### 进行中
- [ ] 硬件采购
- [ ] 软件开发
- [ ] 系统集成测试

### 待完成
- [ ] 实际部署
- [ ] 数据采集
- [ ] 演示准备
- [ ] 项目总结

## 项目计划

**项目周期**：2025-10-17 至 2025-10-27（11天）

详细计划请参见：[project-plan-厨房空气监测实验计划.csv](docs/project-plan-厨房空气监测实验计划.csv)

### 关键里程碑
- 2025-10-19：材料采购完成
- 2025-10-21：硬件搭建完成
- 2025-10-24：软件开发完成
- 2025-10-26：系统部署完成
- 2025-10-27：演示准备完成

## 技术栈

### 硬件
- Arduino Uno R3 / Raspberry Pi 4B
- PMS5003（PM2.5传感器）
- MQ-7（CO传感器）
- MH-Z19B（CO2传感器）
- DHT22/BME280（温湿度传感器）

### 后端
- Python 3.8+
- Flask 2.0+
- SQLAlchemy
- SQLite/MySQL
- pySerial（串口通信）

### 前端
- HTML5/CSS3/JavaScript
- Bootstrap 5
- Chart.js
- Socket.IO
- jQuery

## 安全注意事项

1. ⚠️ 电路连接前务必断电
2. ⚠️ 传感器需定期校准
3. ⚠️ 设备应远离水源
4. ⚠️ 告警阈值设置要合理
5. ⚠️ 定期检查设备状态

## 常见问题

### Q1: 传感器读数不准确怎么办？
A: 传感器需要预热时间（特别是气体传感器），建议开机后等待5-10分钟。另外需要定期使用标准设备进行校准。

### Q2: 如何降低误报率？
A: 可以通过以下方式：
- 使用滑动窗口平均值而不是瞬时值
- 设置告警延迟（持续异常才告警）
- 根据实际环境调整阈值

### Q3: 如何添加更多传感器？
A: 系统采用模块化设计，添加新传感器只需：
1. 连接硬件
2. 在配置文件中添加传感器定义
3. 更新前端显示

### Q4: 可以远程访问吗？
A: 可以，但需要：
1. 配置端口转发或使用内网穿透
2. 设置访问认证
3. 使用HTTPS保证安全

## 参考资料

1. [Arduino官方文档](https://www.arduino.cc/reference/en/)
2. [树莓派官方文档](https://www.raspberrypi.org/documentation/)
3. [Flask官方文档](https://flask.palletsprojects.com/)
4. [室内空气质量标准（GB/T 18883-2022）](http://www.mee.gov.cn/)
5. 各传感器数据手册

## 贡献者

- 项目负责人：实验团队
- 硬件工程师：待定
- 软件工程师：待定
- UI设计师：待定

## 许可证

本项目为教育和研究目的，仅供学习使用。

## 联系方式

如有问题或建议，请联系项目团队。

---

**最后更新**：2025-10-16
**版本**：v1.0
